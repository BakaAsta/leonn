{% extends 'base.html.twig' %}

{% block title %}Accueil{% endblock %}

{% block body %}
<turbo-frame id="the_frame_id">
        {# <a href="{{ path('app_gestion_pret') }}" data-turbo="true">This block is scoped, the rest of the page will not change if you click here!</a> #}
    
<div class="panel">
    <div class="mb-6 grid grid-cols-1 gap-6 text-white sm:grid-cols-2 xl:grid-cols-3 justify-between">
        <div class="flex flex-col items-center text-center justify-between align-middle mb-2 h-full">
    <!-- Bouton "Ajouter un prêt" -->
    <a href="{{ path('app_gestion_pret') }}" class="w-full inline-flex justify-center">
        <button class="w-full relative inline-flex items-center justify-center mb-2 me-2 overflow-hidden text-lg font-medium text-white rounded-lg bg-gradient-to-br from-pink-500 via-pink-600 to-pink-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-pink-300 dark:focus:ring-pink-800 shadow-lg shadow-pink-500/50 dark:shadow-lg dark:shadow-pink-800/80 hover:brightness-125 transition-all transform duration-300 ease-in-out">
            <div class="rtl:rotate-180 flex items-center">
                <svg class="mr-1" xmlns="http://www.w3.org/2000/svg" width="1.6em" height="1.6em" viewBox="0 0 32 32">
                    <path fill="currentColor" d="m21 3.031l-.656.719c-1.469 1.617-2.68 2.34-3.688 2.813c-1.008.472-1.855.613-2.687 1.25c-.887.68-2.176 1.984-2.719 4.312c-1.164.254-2.016.7-2.688 1.281c-.664.574-1.164 1.227-1.78 1.938c-.005.008.003.023 0 .031c-.884 1.016-1.657 2.11-3.157 2.688l-.625.25V29h19.063c1.093-.059 1.851-.816 2.312-1.563c.46-.746.715-1.554.844-2.218c.332-1.692.937-6.563.937-6.563l.032-.093v-.094c-.032-.676-.31-1.25-.657-1.782l1.125-3.343l1.782-2.688l.5-.719l-.657-.593l-6.562-5.688zm.063 2.75l5.218 4.532l-1.375 2.03l-.093.095l-.032.156l-.906 2.687c-.473-.195-.96-.332-1.5-.312h-.063L16 15h-1v3.875c-.14 1.09-.746 1.512-1.5 1.813c-.25.101-.281.046-.5.093V14.97c-.164-3.707 1.156-4.774 2.188-5.563c.285-.219 1.12-.472 2.312-1.031c.996-.469 2.234-1.309 3.563-2.594zm-10 8.594c-.004.227-.075.387-.063.625v8h1s1.07-.012 2.219-.469c1.148-.457 2.535-1.527 2.781-3.406V17l5.375-.031h.031a1.662 1.662 0 0 1 1.75 1.562c-.004.016-.05.387-.062.469H20v2h3.844c-.106.773-.203 1.258-.313 2H20v2h3.219a5.002 5.002 0 0 1-.563 1.375c-.273.445-.508.613-.718.625H5v-7.469c1.621-.86 2.629-2.097 3.281-2.843c.676-.774 1.14-1.36 1.594-1.75c.297-.254.762-.399 1.188-.563"/>
                </svg>
                <span class="w-full relative px-8 py-5 transition-all ease-in duration-75 bg-inherit rounded-md">
                    Ajouter un prêt
                </span>
            </div>
        </button>
    </a>
    
    <!-- Bouton "Ajouter un produit" avec dégradé fuchsia -->
    <a href="{{ path('app_produit_ajouter_flow') }}" class="w-full inline-flex justify-center">
        <button class="w-full relative hover:brightness-125 inline-flex items-center justify-center mb-2 me-2 overflow-hidden text-lg font-medium text-white rounded-lg bg-gradient-to-br from-purple-600 to-blue-500 hover:from-purple-700 hover:to-blue-600 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-700 shadow-lg shadow-blue-500/50 dark:shadow-lg dark:shadow-blue-800/80 transform  transition-all duration-300 ease-in-out">
    <div class="rtl:rotate-180 flex items-center">
        <svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" viewBox="0 0 2048 2048">
            <path fill="currentColor" d="m1344 2l704 352v785l-128-64V497l-512 256v258l-128 64V753L768 497v227l-128-64V354zm0 640l177-89l-463-265l-211 106zm315-157l182-91l-497-249l-149 75zm-507 654l-128 64v-1l-384 192v455l384-193v144l-448 224L0 1735v-676l576-288l576 288zm-640 710v-455l-384-192v454zm64-566l369-184l-369-185l-369 185zm576-1l448-224l448 224v527l-448 224l-448-224zm384 576v-305l-256-128v305zm384-128v-305l-256 128v305zm-320-288l241-121l-241-120z"/>
        </svg>
        <span class="w-full relative px-8 py-5 transition-all ease-in duration-75 bg-inherit rounded-md">
            Ajouter un produit
        </span>
    </div>
</button>
    </a>
</div>
        <twig:HomeCard 
            color="panel bg-gradient-to-r from-violet-500 to-violet-400"
            title="Nombre de produits totaux"
            value="{{ produits }}"
            link="{{ path('app_produit') }}"
        />
        <twig:HomeCard 
            color="panel bg-gradient-to-r from-fuchsia-500 to-fuchsia-400"
            title="Nombre de prêts en retard"
            value="{{ nbrPretsRetard }}"
            link="{{ path('app_gestion_retard_pret') }}"
        />
    </div>
    <div class='flex justify-between'>
        
    </div>
    <div class="panel space-y-4">
        <div class="flex items-center justify-between">
            <h2 class='font-bold text-2xl'>Liste des prêts en cours : {{ nbrPretsListe }}</h2>
            <h2 class='font-bold text-2xl border-2 rounded-md p-2 border-black'>{{ "now"|date("d/m/Y") }}</h2>
        </div>
        <div {{ react_component('tableauPret', {pret: 'enCours', user: app.user.email, token: accessToken}) }}></div> 
    </div>

    <div class="mb-6 grid grid-cols-1 gap-6 text-white sm:grid-cols-2 xl:grid-cols-4 mt-6 ">
        <twig:HomeCard 
            color="panel bg-gradient-to-r from-cyan-500 to-cyan-400"
            title="Nombre de prets ce mois-ci"
            value="{{ pretsMois }}"
            badge="{{ progressMois }}"
        />
        <twig:HomeCard 
            color="panel bg-gradient-to-r from-cyan-500 to-cyan-400"
            title="Nombre de prets cette année"
            value="{{ nbrPretsAn }}"
            badge="{{ progressAn }}"
        />
    </div>
</div>
</turbo-frame>
{% endblock %}
